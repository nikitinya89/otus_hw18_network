# Otus Homework 18. Архитектура сетей.
### Цель домашнего задания
Научится менять базовые сетевые настройки в Linux-based системах.
### Описание домашнего задания
1. Скачать и развернуть [Vagrant-стенд](https://github.com/erlong15/otus-linux/tree/network)
2. Построить следующую сетевую архитектуру:
  
Сеть **office1**:  
- 192.168.2.0/26 - dev
- 192.168.2.64/26 - test servers
- 192.168.2.128/26 - managers
- 192.168.2.192/26 - office hardware

Сеть **office2**:  
- 192.168.1.0/25 - dev
- 192.168.1.128/26 - test servers
- 192.168.1.192/26 - office hardware

Сеть **central**:  
- 192.168.0.0/28 - directors
- 192.168.0.32/28 - office hardware
- 192.168.0.64/26 - wifi

![map 1](network_map_1.jpg)  
Итого должны получиться следующие сервера:
- inetRouter
- centralRouter
- office1Router
- office2Router
- centralServer
- office1Server
- office2Server
  
Задание состоит из 2-х частей: теоретической и практической.  
  
**Теоретическая часть:**
- Найти свободные подсети
- Посчитать количество узлов в каждой подсети, включая свободные
- Указать Broadcast-адрес для каждой подсети
- Проверить, нет ли ошибок при разбиении
  
**Практическая часть:**
- Соединить офисы в сеть согласно логической схеме и настроить роутинг
- Интернет-трафик со всех серверов должен ходить через inetRouter
- Все сервера должны видеть друг друга (должен проходить ping)
- У всех новых серверов отключить дефолт на NAT (eth0), который vagrant поднимает для связи
- Добавить дополнительные сетевые интерфейсы, если потребуется

## Выполнение
### Теоритическая часть
Исходя из заданой сетевой адресации, построим таблицу:
  
<table>
  <tr>
    <th>Название</th>
    <th>Подсеть</th>
    <th>Маска</th>
    <th>Количество хостов</th>
    <th>Начальный адрес</th>
    <th>Последний адрес</th>
    <th>Broadcast</th>
  </tr>
  <tr>
    <th colspan="7">Сеть Central</th>
  </tr>
  <tr>
    <th>Directors</th>
    <td>192.168.0.0/28</td>
    <td>255.255.255.240</td>
    <td>14</td>
    <td>192.168.0.1</td>
    <td>192.168.0.14</td>
    <td>192.168.0.15</td>
  </tr>
  <tr>
    <th>Office Hardware</th>
    <td>192.168.0.32/28</td>
    <td>255.255.255.240</td>
    <td>14</td>
    <td>192.168.0.33</td>
    <td>192.168.0.46</td>
    <td>192.168.0.47</td>
  </tr>
  <tr>
    <th>Wi-Fi</th>
    <td>192.168.0.64/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.0.65</td>
    <td>192.168.0.126</td>
    <td>192.168.0.127</td>
  </tr>
  <tr>
    <th colspan="7">Сеть Office1</th>
  </tr>
  <tr>
    <th>Dev</th>
    <td>192.168.2.0/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.0.1</td>
    <td>192.168.0.62</td>
    <td>192.168.0.63</td>
  </tr>
  <tr>
    <th>Test Servers</th>
    <td>192.168.2.64/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.0.65</td>
    <td>192.168.0.126</td>
    <td>192.168.0.127</td>
  </tr>
  <tr>
    <th>Managers</th>
    <td>192.168.2.128/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.0.129</td>
    <td>192.168.0.190</td>
    <td>192.168.0.191</td>
  </tr>
   <tr>
    <th>Office Hardware</th>
    <td>192.168.2.192/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.0.193</td>
    <td>192.168.0.254</td>
    <td>192.168.0.255</td>
  </tr> 
  <tr>
    <th colspan="7">Сеть Office2</th>
  </tr>
  <tr>
    <th>Dev</th>
    <td>192.168.1.0/25</td>
    <td>255.255.255.128</td>
    <td>126</td>
    <td>192.168.1.1</td>
    <td>192.168.1.126</td>
    <td>192.168.1.127</td>
  </tr>
  <tr>
    <th>Test Servers</th>
    <td>192.168.1.128/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.1.129</td>
    <td>192.168.1.190</td>
    <td>192.168.1.191</td>
  </tr>
   <tr>
    <th>Office Hardware</th>
    <td>192.168.1.192/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.1.193</td>
    <td>192.168.1.254</td>
    <td>192.168.1.255</td>
  </tr> 
  <tr>
    <th colspan="7">Сеть CentralRouter-InetRouter</th>
  </tr>
  <tr>
    <th>Central-Inet</th>
    <td>192.168.255.0/30</td>
    <td>255.255.255.252</td>
    <td>2</td>
    <td>192.168.255.1</td>
    <td>192.168.255.2</td>
    <td>192.168.1.3</td>
  </tr>
</table>

Мы можем определить свободные подсети в используемых диапазонах:
  
<table>
<th colspan="7">Свободные подсети</th>
  <tr>
    <th>Подсеть</th>
    <th>Маска</th>
    <th>Количество хостов</th>
    <th>Начальный адрес</th>
    <th>Последний адрес</th>
    <th>Broadcast</th>
  </tr>
  <tr>
    <td>192.168.0.16/28</td>
    <td>255.255.255.240</td>
    <td>14</td>
    <td>192.168.0.17</td>
    <td>192.168.0.30</td>
    <td>192.168.0.31</td>
  </tr>
  <tr>
    <td>192.168.0.48/28</td>
    <td>255.255.255.240</td>
    <td>14</td>
    <td>192.168.0.17</td>
    <td>192.168.0.62</td>
    <td>192.168.0.63</td>
  </tr>  
    <tr>
    <td>192.168.0.128/25</td>
    <td>255.255.255.128</td>
    <td>126</td>
    <td>192.168.0.129</td>
    <td>192.168.0.254</td>
    <td>192.168.0.255</td>
  </tr>
  <tr>
    <td>192.168.255.4/30</td>
    <td>255.255.255.252</td>
    <td>2</td>
    <td>192.168.255.5</td>
    <td>192.168.255.6</td>
    <td>192.168.255.7</td>
  </tr>  
  <tr>
    <td>192.168.255.8/29</td>
    <td>255.255.255.248</td>
    <td>6</td>
    <td>192.168.255.9</td>
    <td>192.168.255.14</td>
    <td>192.168.255.15</td>
  </tr>  
  <tr>
    <td>192.168.255.16/28</td>
    <td>255.255.255.240</td>
    <td>14</td>
    <td>192.168.255.17</td>
    <td>192.168.255.30</td>
    <td>192.168.255.31</td>
  </tr>  
  <tr>
    <td>192.168.255.32/27</td>
    <td>255.255.255.224</td>
    <td>30</td>
    <td>192.168.255.33</td>
    <td>192.168.255.62</td>
    <td>192.168.255.63</td>
  </tr>  
  <tr>
    <td>192.168.255.64/26</td>
    <td>255.255.255.192</td>
    <td>62</td>
    <td>192.168.255.65</td>
    <td>192.168.255.126</td>
    <td>192.168.255.127</td>
  </tr>  
  <tr>
    <td>192.168.255.128/25</td>
    <td>255.255.255.128</td>
    <td>126</td>
    <td>192.168.255.129</td>
    <td>192.168.255.254</td>
    <td>192.168.255.255</td>
  </tr>  
</table>

### Практическая часть
Построим карту сети:  
  
![map 2](network_map_2.jpg)
